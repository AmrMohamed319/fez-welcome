<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FEZ COFFEE - Welcome</title>

  <!-- خطوط + Tailwind + FontAwesome -->
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Montserrat:wght@300;400;700;900&family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">

  <style>
    body { font-family: 'Cairo', sans-serif; background-color: #fff; color: #000; margin: 0; padding: 0; overflow: hidden; }
    .slide { width: 100%; min-height: 100vh; display: flex; flex-direction: column; background-color: #fff; }
    .brand { text-align: center; padding: 40px 0 20px; }
    .brand-name { font-family: 'Bebas Neue', cursive; font-size: 120px; font-weight: 900; letter-spacing: 15px; line-height: 0.9; text-transform: uppercase; direction: ltr; }
    @keyframes floatPulse { 0%,100% { transform: translateY(0) scale(1); } 50% { transform: translateY(-10px) scale(1.05); } }
    .brand-name span { position: relative; display: inline-block; animation: floatPulse 3s ease-in-out infinite; }
    .brand-name span::after { content: ''; position: absolute; bottom: -8px; left: 0; width: 100%; height: 3px; background: linear-gradient(90deg, transparent, rgba(0,0,0,0.3), transparent); }
    .brand-name span:nth-child(1) { color: #FF4081; animation-delay: 0s; }
    .brand-name span:nth-child(2), .brand-name span:nth-child(3) { color: #000; }
    .brand-type { font-size: 22px; color: #555; margin-top: 10px; letter-spacing: 4px; font-weight: 300; text-transform: uppercase; }
    .welcome-content { flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 10px 20px 30px; text-align: center; }
    .arabic-welcome { font-size: 32px; font-weight: 700; margin: 20px 0; color: #000; }
    .arabic-line { font-size: 26px; color: #FF4081; margin: 15px 0; }
    .arabic-rewards { font-size: 32px; font-weight: 700; margin: 20px 0; color: #000; }
    #customer-name { font-size: 48px; color: #FF4081; font-weight: 900; margin: 20px 0; }
    #customer-points { font-size: 40px; color: #555; font-weight: 700; margin: 20px 0; }
    @keyframes fadeScale { 0% { opacity: 0; transform: scale(0.8); } 100% { opacity: 1; transform: scale(1); } }
    .highlight { animation: fadeScale 1s ease; }
    .footer { display: flex; flex-direction: column; align-items: center; padding: 20px 0; }
    .social-icons { display: flex; justify-content: center; gap: 25px; margin-bottom: 15px; }
    .social-icon { color: #333; font-size: 30px; background-color: rgba(0, 0, 0, 0.05); width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; }
    .social-icon:hover { color: #FF4081; background-color: rgba(255, 64, 129, 0.15); }
    .brand-url { font-size: 20px; color: #555; font-weight: 300; }
  </style>
</head>
<body>
  <div class="slide">
    <div class="brand">
      <div class="brand-name">
        <span>F</span><span>E</span><span>Z</span>
      </div>
      <div class="brand-type">SPECIALTY COFFEE</div>
    </div>
    
    <div class="welcome-content">
      <div class="arabic-welcome">مرحبا بك ضيفنا العزيز يسعدنا دائما رؤيتك</div>
      <div class="arabic-line">أهلا وسهلا</div>
      <div id="customer-name">****----****----</div>
      <div class="arabic-rewards">رصيد المكافآت الخاص بك</div>
      <div id="customer-points">****</div>
    </div>
    
    <div class="footer">
      <div class="social-icons">
        <div class="social-icon"><i class="fab fa-tiktok"></i></div>
        <div class="social-icon"><i class="fab fa-instagram"></i></div>
        <div class="social-icon"><i class="fab fa-snapchat"></i></div>
        <div class="social-icon"><i class="fas fa-globe"></i></div>
      </div>
      <div class="brand-url">fezcaf</div>
    </div>
  </div>

  <!-- كود التحديث التلقائي من السيرفر على البورت 5001 -->
  <script>
    function updateCustomer(name, points) {
      const nameEl = document.getElementById("customer-name");
      const pointsEl = document.getElementById("customer-points");
      nameEl.textContent = name;
      pointsEl.textContent = points;
      nameEl.classList.remove("highlight");
      pointsEl.classList.remove("highlight");
      void nameEl.offsetWidth;
      void pointsEl.offsetWidth;
      nameEl.classList.add("highlight");
      pointsEl.classList.add("highlight");
    }

    async function fetchCustomerData() {
      try {
        const response = await fetch('http://72.60.132.17:5001/data');
        const data = await response.json();
        updateCustomer(data.name, data.points);
      } catch (err) {
        console.error('خطأ في جلب البيانات:', err);
      }
    }

    // جلب البيانات كل 3 ثواني
    setInterval(fetchCustomerData, 3000);
    fetchCustomerData(); // جلب أول مرة مباشرة
  </script>
</body>
</html>
